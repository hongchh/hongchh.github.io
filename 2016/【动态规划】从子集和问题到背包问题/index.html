<!DOCTYPE html><html><head><meta charset="utf-8"><title>【动态规划】从子集和问题到背包问题 | 洪创煌的博客</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="keywords" content="数据结构与算法"><meta name="description" content="一、问题定义有一个包含n个元素{e1, e2, ..., en}的集合S，每个元素ei都有一个对应的权值wi。现在有一个界限W，我们希望从S中选择出部分元素，使得这些元素的权值之和在不超过W的情况下达到最大，这个便是子集合问题（事实上还有其他类型的子集和问题，本文暂不讨论）。举个更具体一点的例子，某农民今年收成小番茄总重量为W万斤，有n个采购商想要向这位农民收购小番茄，他们想要采购的数目都有所不同"><meta name="keywords" content="数据结构与算法"><meta property="og:type" content="article"><meta property="og:title" content="【动态规划】从子集和问题到背包问题"><meta property="og:url" content="https://hongchh.github.io/2016/【动态规划】从子集和问题到背包问题/index.html"><meta property="og:site_name" content="洪创煌的博客"><meta property="og:description" content="一、问题定义有一个包含n个元素{e1, e2, ..., en}的集合S，每个元素ei都有一个对应的权值wi。现在有一个界限W，我们希望从S中选择出部分元素，使得这些元素的权值之和在不超过W的情况下达到最大，这个便是子集合问题（事实上还有其他类型的子集和问题，本文暂不讨论）。举个更具体一点的例子，某农民今年收成小番茄总重量为W万斤，有n个采购商想要向这位农民收购小番茄，他们想要采购的数目都有所不同"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://hongchh.github.io/images/2016-12-22-1.png"><meta property="og:updated_time" content="2017-11-11T09:46:03.550Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="【动态规划】从子集和问题到背包问题"><meta name="twitter:description" content="一、问题定义有一个包含n个元素{e1, e2, ..., en}的集合S，每个元素ei都有一个对应的权值wi。现在有一个界限W，我们希望从S中选择出部分元素，使得这些元素的权值之和在不超过W的情况下达到最大，这个便是子集合问题（事实上还有其他类型的子集和问题，本文暂不讨论）。举个更具体一点的例子，某农民今年收成小番茄总重量为W万斤，有n个采购商想要向这位农民收购小番茄，他们想要采购的数目都有所不同"><meta name="twitter:image" content="https://hongchh.github.io/images/2016-12-22-1.png"><link rel="icon" href="/css/images/favicon.png"><link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/libs/titillium-web/styles.css"><link rel="stylesheet" href="/libs/source-code-pro/styles.css"><link rel="stylesheet" href="/css/style.css"><script src="/libs/jquery/2.0.3/jquery.min.js"></script><link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css"><link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css"><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script></head></html><body><div id="wrap"><header id="header"><div id="header-outer" class="outer"><div class="container"><div class="container-inner"><div id="header-title"><h1 class="logo-wrap"><a href="/" class="logo"></a></h1><h2 class="subtitle-wrap"><p class="subtitle">生命是一场练习！</p></h2></div><div id="header-inner" class="nav-container"><a id="main-nav-toggle" class="nav-icon fa fa-bars"></a><div class="nav-container-inner"><ul id="main-nav"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/">主页</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/about/index.html">关于</a></li></ul><nav id="sub-nav"><div id="search-form-wrap"><form class="search-form"><input type="text" class="ins-search-input search-form-input" placeholder="搜索"> <button type="submit" class="search-form-submit"></button></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="想要查找什么..."> <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"文章",PAGES:"页面",CATEGORIES:"分类",TAGS:"标签",UNTITLED:"(未命名)"},ROOT_URL:"/",CONTENT_URL:"/content.json"}</script><script src="/js/insight.js"></script></div></nav></div></div></div></div></div></header><div class="container"><div class="main-body container-inner"><div class="main-body-inner"><section id="main"><div class="main-body-header"><h1 class="header">未分类</h1></div><div class="main-body-content"><article id="post-【动态规划】从子集和问题到背包问题" class="article article-single article-type-post" itemscope itemprop="blogPost"><div class="article-inner"><header class="article-header"><h1 class="article-title" itemprop="name">【动态规划】从子集和问题到背包问题</h1></header><div class="article-meta"><div class="article-date"><a href="/2016/【动态规划】从子集和问题到背包问题/" class="article-date"><time datetime="2016-12-22T02:32:02.000Z" itemprop="datePublished">2016-12-22</time></a></div><div class="article-tag"><i class="fa fa-tag"></i> <a class="tag-link" href="/tags/数据结构与算法/">数据结构与算法</a></div></div><div class="article-entry" itemprop="articleBody"><h2 id="一、问题定义"><a href="#一、问题定义" class="headerlink" title="一、问题定义"></a>一、问题定义</h2><p>有一个包含<code>n</code>个元素<code>{e1, e2, ..., en}</code>的集合<code>S</code>，每个元素<code>ei</code>都有一个对应的权值<code>wi</code>。现在有一个界限<code>W</code>，我们希望从<code>S</code>中选择出部分元素，使得这些元素的权值之和在不超过<code>W</code>的情况下达到最大，这个便是子集合问题（事实上还有其他类型的子集和问题，本文暂不讨论）。举个更具体一点的例子，某农民今年收成小番茄总重量为<code>W</code>万斤，有<code>n</code>个采购商想要向这位农民收购小番茄，他们想要采购的数目都有所不同，采购商<code>i</code>想要收购<code>wi</code>万斤小番茄(<code>1 &lt;= i &lt;= n</code>)。现在农民需要从采购商中挑选部分买家，将小番茄卖给他们，使得自己被收购的小番茄数目达到最大，从而赚取最大的收入（假设所有采购商给出的单位收购价都是一样的；所有采购商的收购量总和超过农民的收成量，即农民无法满足所有采购商；收购商<code>i</code>想要收购<code>wi</code>万斤小番茄，他不会只收购一半或者更多）。</p><h2 id="二、解决思路"><a href="#二、解决思路" class="headerlink" title="二、解决思路"></a>二、解决思路</h2><p>根据动态规划的思路，我们来分析一下这个问题的子问题。假设农民已经从前面<code>n-1</code>个收购商中选出了一组最优组合使得收购量最大，现在他要考虑是否要卖给最后一个收购商<code>n</code>。假如卖给收购商<code>n</code>，那么他能够卖给前面<code>n-1</code>个收购商的番茄就只有<code>(W-wn)</code>万斤。如果他不卖给收购商<code>n</code>，那么他能够卖给前面<code>n-1</code>个收购商的番茄就是<code>W</code>万斤了。于是，假设在只有<code>(W-wn)</code>万斤的情况下，从前面<code>n-1</code>个收购商中选出最优组合所收购的总重量加上卖给收购商<code>n</code>的重量为<code>(O1+wn)</code>。若<code>W</code>万斤都卖给前面<code>n-1</code>个收购商，他们之中选出的最优组合所收购的总重量为<code>O2</code>。农民需要考虑的问题就变成了比较<code>(O1+wn)</code>和<code>O2</code>的大小了。</p><p>我们更形式化一点地进行描述，假设<code>O(i, w)</code>表示将<code>w</code>万斤小番茄提供给收购商<code>{1, 2, ..., i}</code>收购的时候，从这<code>i</code>个收购商中选出最优组合所收购的总重量。那么<code>O1 = O(n-1, W-wn)</code>，<code>O2 = (n-1, W)</code>。当农民考虑收购商<code>n</code>的时候，他需要判定<code>O1</code>和<code>O2</code>的大小。另外一种特殊情况，当收购商收购的数量<code>wn</code>超过农民拥有的所有小番茄的时候，即<code>W &lt; wn</code>，那么农民自然只能考虑前面<code>n-1</code>个收购商中的最优组合了。</p><p>更进一步考虑，当我们考虑<code>O(i, w)</code>的时候，如果<code>w</code>能够容纳<code>wi</code>，那么我们需要考虑<code>O(i-1, w)</code>和<code>(O(i-1, w-wi) + wi)</code>的大小。如果<code>w</code>无法容纳<code>wi</code>，即<code>w &lt; wi</code>，那么无需考虑<code>i</code>，<code>O(i, w) = O(i-1, w)</code>。因此，我们可以得到递推公式如下所示：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if w &lt; wi, O(i, w) = O(i-1, w)</span><br><span class="line">else O(i, w) = max(O(i-1, w), wi + O(i-1, w-wi))</span><br></pre></td></tr></table></figure><p></p><p>得到了递推公式，我们自然就可以得到一个算法来算出最优解。算法的伪代码如下所示：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">数组O[0...n, 0...W]</span><br><span class="line">for w = 0, 1, ..., W</span><br><span class="line">    初始化O[0, w] = 0</span><br><span class="line">endFor</span><br><span class="line">for i = 1, 2, ..., n</span><br><span class="line">    for w = 0, ..., W</span><br><span class="line">        if w &lt; wi</span><br><span class="line">            O[i, w] = O[i-1, w]</span><br><span class="line">        else</span><br><span class="line">            O[i, w] = max(O[i-1, w], wi + O[i-1, w-wi])</span><br><span class="line">    endFor</span><br><span class="line">endFor</span><br><span class="line">O[n, W]即为最优解</span><br></pre></td></tr></table></figure><p></p><p>算法实际上是实现了一个填表的过程，填了一张<code>n*W</code>的二维表格。整个算法的时间复杂度为<code>O(nW)</code>，显而易见，当<code>W</code>的值变得很大的时候，这个算法的效率堪忧。</p><p><img src="/images/2016-12-22-1.png" alt="二维表格"></p><p>现在暂时抛开效率问题，我们发现，上面给出的算法只能算出最优解的值，但是并没有给出所选择的子集合。即农民用这个算法之后只知道他最多能卖多少小番茄，但还是不知道要卖给哪些收购商。为了解决这个问题，我们只需要反向搜索一下数组<code>O</code>即可在<code>O(n)</code>的时间内找出最优解的元素组合情况。反向搜索的时候，如果<code>O(i, w)</code>等于<code>O(i-1, w)</code>，说明<code>i</code>没有被选择，继续对前面<code>i-1</code>个元素考虑重量为<code>w</code>时候的情况。如果<code>O(i, w)</code>不等于<code>O(i-1, w)</code>的话，说明选择了<code>i</code>，然后接着就应该继续对前面<code>i-1</code>个元素考虑重量为<code>(w-wi)</code>时候的情况，具体的伪代码如下所示：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">初始化i = n, w = W</span><br><span class="line">while i != 0 do</span><br><span class="line">    if O[i, w] == O[i-1, w]</span><br><span class="line">        i = i-1</span><br><span class="line">    else</span><br><span class="line">        print i</span><br><span class="line">        i = i-1</span><br><span class="line">        w = w-wi</span><br><span class="line">    endIf</span><br><span class="line">endWhile</span><br></pre></td></tr></table></figure><p></p><h2 id="三、代码实例"><a href="#三、代码实例" class="headerlink" title="三、代码实例"></a>三、代码实例</h2><p>下面给出一个简单的C++代码实现，代码后面还附带有简单的示例。<br></p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_NUM = <span class="number">100</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX_WEIGHT = <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubSetProblem</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(<span class="keyword">int</span> n, <span class="keyword">int</span> W)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;n = n;</span><br><span class="line">    <span class="keyword">this</span>-&gt;W = W;</span><br><span class="line">    <span class="built_in">memset</span>(optional, <span class="number">0</span>, <span class="keyword">sizeof</span>(optional));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">      <span class="built_in">cin</span> &gt;&gt; weight[i];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">process</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> w = <span class="number">0</span>; w &lt;= W; ++w) &#123;</span><br><span class="line">        <span class="keyword">if</span> (w &lt; weight[i]) &#123;</span><br><span class="line">          optional[i][w] = optional[i<span class="number">-1</span>][w];</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (optional[i<span class="number">-1</span>][w] &lt; weight[i] + optional[i<span class="number">-1</span>][w-weight[i]]) &#123;</span><br><span class="line">          optional[i][w] = weight[i] + optional[i<span class="number">-1</span>][w-weight[i]];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          optional[i][w] = optional[i<span class="number">-1</span>][w];</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">void</span> <span class="title">result</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"[Select]"</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = n, w = W; i != <span class="number">0</span>; --i) &#123;</span><br><span class="line">      <span class="keyword">if</span> (optional[i][w] == optional[i<span class="number">-1</span>][w]) &#123;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">' '</span> &lt;&lt; i;</span><br><span class="line">        w -= weight[i];</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"\n[Optional] "</span> &lt;&lt; optional[n][W] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">  <span class="keyword">int</span> n, W;</span><br><span class="line">  <span class="keyword">int</span> weight[MAX_NUM + <span class="number">1</span>];</span><br><span class="line">  <span class="keyword">int</span> optional[MAX_NUM + <span class="number">1</span>][MAX_WEIGHT + <span class="number">1</span>];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  SubSetProblem ssp;</span><br><span class="line">  <span class="keyword">int</span> n, W;</span><br><span class="line">  <span class="built_in">cin</span> &gt;&gt; n &gt;&gt; W;</span><br><span class="line">  <span class="keyword">if</span> (n &gt; MAX_NUM || W &gt; MAX_WEIGHT) &#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"error"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  ssp.init(n, W);</span><br><span class="line">  ssp.process();</span><br><span class="line">  ssp.result();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p></p><p>输入输出示例：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">3 6</span><br><span class="line">2 2 3</span><br><span class="line">[Select] 3 1</span><br><span class="line">[Optional] 5</span><br></pre></td></tr></table></figure><p></p><h2 id="四、背包问题"><a href="#四、背包问题" class="headerlink" title="四、背包问题"></a>四、背包问题</h2><p>把上面的子集和问题拓展一下，就变成了我们常见的背包问题了。问题定义：有一个包含<code>n</code>个元素<code>{e1, e2, ..., en}</code>的集合<code>S</code>，每个元素<code>ei</code>都有一个对应的权值<code>wi</code>和一个对应的价值<code>vi</code>。现在有一个界限<code>W</code>，我们希望从<code>S</code>中选择出部分元素，使得这些元素的权值之和在不超过<code>W</code>的情况下，所有元素的价值总和达到最大。继续拿上面的农民买小番茄的例子来讲，假设现在每个收购商的出价都有所不同，收购商<code>i</code>打算收购<code>wi</code>万斤小番茄，出价<code>vi</code>。农民只有<code>W</code>万斤能够提供给收购商，他希望合理选择收购商，使得卖小番茄的收益达到最大。</p><p>这个问题看起来跟前面的子集和问题很像，解决思路也是基本一样。同样地，农民在考虑收购商<code>n</code>的时候，他需要考虑两个子问题。第一，如果把<code>W</code>万斤小番茄全部拿来提供给前面的<code>n-1</code>个收购商，他能拿到的最大收益为<code>O(n-1, W)</code>。第二，如果先出售部分小番茄给收购商<code>n</code>，剩下的再提供给前面<code>n-1</code>个收购商，他能拿到的最大收益为<code>(O(n-1, W-wn) + vn)</code>。于是，只要<code>O(n-1, W)</code>的价值更大，农民自然不会考虑收购商<code>n</code>，否则他肯定要先出售部分小番茄给收购商<code>n</code>。最后，考虑特殊情况，当收购商<code>n</code>的收购量超过农民所能提供的小番茄时，农民也就只能将<code>W</code>万斤小番茄提供给前面<code>n-1</code>个收购商了。</p><p>假设<code>O(i, w)</code>表示农民将<code>w</code>万斤小番茄提供给前<code>i</code>个收购商所能赚取的最大收益，按照之前讲解子集和问题的思路，我们可以得到递推公式如下：<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if w &lt; wi, O(i, w) = O(i-1, w)</span><br><span class="line">else O(i, w) = max(O(i-1, w), vi + O(i-1, w-wi))</span><br></pre></td></tr></table></figure><p></p><p>可以看到，公式几乎跟之前的子集和问题一样。只不过，子集和问题中我们考虑的是重量<code>w</code>，而这里我们考虑的是价值<code>v</code>。两者本质上是同样的，只不过判定的标准变了而已。解决这种类型的背包问题的算法跟之前的一样，只需要将<code>wi</code>换成<code>vi</code>即可，最后反向搜索求解最优解的元素组合情况的做法也是与之前一样，代码相似度较高，所以下面我就不重复贴代码了。这个算法的时间复杂度也是<code>O(nW)</code>，反向搜索的时间复杂度为<code>O(n)</code>。算法缺陷也是跟之前一样，当W的值非常大的时候，算法效率低下。</p></div><footer class="article-footer"><a data-url="https://hongchh.github.io/2016/【动态规划】从子集和问题到背包问题/" data-id="cjjcl3ci9001jtktii6duuzzy" class="article-share-link"><i class="fa fa-share"></i>分享到</a><script>!function(n){n("body").on("click",function(){n(".article-share-box.on").removeClass("on")}).on("click",".article-share-link",function(t){t.stopPropagation();var e,a=n(this),o=a.attr("data-url"),r=encodeURIComponent(o),i="article-share-box-"+a.attr("data-id"),s=a.offset();if(n("#"+i).length){if((e=n("#"+i)).hasClass("on"))return void e.removeClass("on")}else{var l=['<div id="'+i+'" class="article-share-box">','<input class="article-share-input" value="'+o+'">','<div class="article-share-links">','<a href="https://twitter.com/intent/tweet?url='+r+'" class="article-share-twitter" target="_blank" title="Twitter"></a>','<a href="https://www.facebook.com/sharer.php?u='+r+'" class="article-share-facebook" target="_blank" title="Facebook"></a>','<a href="http://pinterest.com/pin/create/button/?url='+r+'" class="article-share-pinterest" target="_blank" title="Pinterest"></a>','<a href="https://plus.google.com/share?url='+r+'" class="article-share-google" target="_blank" title="Google+"></a>',"</div>","</div>"].join("");e=n(l),n("body").append(e)}n(".article-share-box.on").hide(),e.css({top:s.top+25,left:s.left}).addClass("on")}).on("click",".article-share-box",function(t){t.stopPropagation()}).on("click",".article-share-box-input",function(){n(this).select()}).on("click",".article-share-box-link",function(t){t.preventDefault(),t.stopPropagation(),window.open(this.href,"article-share-box-window-"+Date.now(),"width=500,height=450")})}(jQuery)</script></footer></div></article><section id="comments"></section></div></section><aside id="sidebar"><a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a><div class="sidebar-top"><p>关注我 :</p><ul class="social-links"><li><a class="social-tooltip" title="github" href="https://github.com/hongchh" target="_blank"><i class="icon fa fa-github"></i></a></li></ul></div><nav id="article-nav"><a href="/2017/记一个Vue项目的开发历程/" id="article-nav-newer" class="article-nav-link-wrap"><strong class="article-nav-caption">下一篇</strong><p class="article-nav-title">记一个Vue项目的开发历程</p><i class="icon fa fa-chevron-right" id="icon-chevron-right"></i> </a><a href="/2016/服务器性能优化初探/" id="article-nav-older" class="article-nav-link-wrap"><strong class="article-nav-caption">上一篇</strong><p class="article-nav-title">服务器性能优化初探</p><i class="icon fa fa-chevron-left" id="icon-chevron-left"></i></a></nav><div class="widgets-container"><div class="widget-wrap"><h3 class="widget-title">最新文章</h3><div class="widget"><ul id="recent-post"><li><div class="item-thumbnail"><a href="/2018/微信小程序入坑-写一个简化版知乎日报/" class="thumbnail"><span style="background-image:url(/images/2018-07-06/pages.png)" alt="微信小程序入坑: 写一个简化版知乎日报" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/2018/微信小程序入坑-写一个简化版知乎日报/" class="title">微信小程序入坑: 写一个简化版知乎日报</a></p><p class="item-date"><time datetime="2018-07-06T02:25:52.000Z" itemprop="datePublished">2018-07-06</time></p></div></li><li><div class="item-thumbnail"><a href="/2018/NodeJS-Cpp-Addons之C-类实例包装与异步操作/" class="thumbnail"><span style="background-image:url(/images/2018-04-19/1.png)" alt="NodeJS C++ Addons之C++类实例包装与异步操作" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/2018/NodeJS-Cpp-Addons之C-类实例包装与异步操作/" class="title">NodeJS C++ Addons之C++类实例包装与异步操作</a></p><p class="item-date"><time datetime="2018-04-19T09:20:27.000Z" itemprop="datePublished">2018-04-19</time></p></div></li><li><div class="item-thumbnail"><a href="/2018/NodeJS-Cpp-Addons基础/" class="thumbnail"><span style="background-image:url(/images/2018-04-16/1.png)" alt="NodeJS C++ Addons基础" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/2018/NodeJS-Cpp-Addons基础/" class="title">NodeJS C++ Addons基础</a></p><p class="item-date"><time datetime="2018-04-16T07:45:57.000Z" itemprop="datePublished">2018-04-16</time></p></div></li><li><div class="item-thumbnail"><a href="/2018/试玩NodeJS多进程/" class="thumbnail"><span style="background-image:url(/images/2018-04-11/master-worker.png)" alt="试玩NodeJS多进程" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/2018/试玩NodeJS多进程/" class="title">试玩NodeJS多进程</a></p><p class="item-date"><time datetime="2018-04-11T07:47:22.000Z" itemprop="datePublished">2018-04-11</time></p></div></li><li><div class="item-thumbnail"><a href="/2017/MonkeyEye电影售票系统-性能优化总结/" class="thumbnail"><span style="background-image:url(/images/2017-06-09-23.jpg)" alt="MonkeyEye电影售票系统-性能优化总结" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/2017/MonkeyEye电影售票系统-性能优化总结/" class="title">MonkeyEye电影售票系统-性能优化总结</a></p><p class="item-date"><time datetime="2017-06-09T07:43:09.000Z" itemprop="datePublished">2017-06-09</time></p></div></li></ul></div></div><div class="widget-wrap widget-list"><h3 class="widget-title">归档</h3><div class="widget"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a><span class="archive-list-count">1</span></li></ul></div></div><div class="widget-wrap widget-list"><h3 class="widget-title">标签</h3><div class="widget"><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NodeJS/">NodeJS</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Web/">Web</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/其他/">其他</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端/">前端</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库/">数据库</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据结构与算法/">数据结构与算法</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/计算机网络/">计算机网络</a><span class="tag-list-count">3</span></li></ul></div></div><div class="widget-wrap widget-float"><h3 class="widget-title">标签云</h3><div class="widget tagcloud"><a href="/tags/JavaScript/" style="font-size:20px">JavaScript</a> <a href="/tags/NodeJS/" style="font-size:16px">NodeJS</a> <a href="/tags/Web/" style="font-size:18px">Web</a> <a href="/tags/其他/" style="font-size:12px">其他</a> <a href="/tags/前端/" style="font-size:10px">前端</a> <a href="/tags/数据库/" style="font-size:10px">数据库</a> <a href="/tags/数据结构与算法/" style="font-size:18px">数据结构与算法</a> <a href="/tags/计算机网络/" style="font-size:14px">计算机网络</a></div></div><div class="widget-wrap widget-list"><h3 class="widget-title">链接</h3><div class="widget"><ul><li><a href="http://blog.csdn.net/hongchh">CSDN</a></li></ul></div></div></div></aside></div></div></div><footer id="footer"><div class="container"><div class="container-inner"><a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a><div class="credit"><h1 class="logo-wrap"><a href="/" class="logo"></a></h1><p>&copy; 2018 洪创煌(hongchh_sysu@qq.com)</p><p>Powered by <a href="//hexo.io/" target="_blank">Hexo</a>. Theme by <a href="//github.com/ppoffice" target="_blank">PPOffice</a></p></div></div></div></footer><script src="/libs/lightgallery/js/lightgallery.min.js"></script><script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script><script src="/libs/lightgallery/js/lg-pager.min.js"></script><script src="/libs/lightgallery/js/lg-autoplay.min.js"></script><script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script><script src="/libs/lightgallery/js/lg-zoom.min.js"></script><script src="/libs/lightgallery/js/lg-hash.min.js"></script><script src="/libs/lightgallery/js/lg-share.min.js"></script><script src="/libs/lightgallery/js/lg-video.min.js"></script><script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="/js/main.js"></script></div></body>