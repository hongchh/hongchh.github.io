<!DOCTYPE html><html><head><meta charset="utf-8"><title>微信小程序入坑: 写一个简化版知乎日报 | 洪创煌的博客</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="keywords" content="前端"><meta name="description" content="最近开始入坑微信小程序，发现想要练手也不容易，找免费的基于HTTPS的API就要花点时间。在看了网上一些介绍后，决定采用知乎日报的API，写一个简单版的知乎日报作为入坑练习。本文尝试使用微信小程序写一个小demo，实现知乎日报的3个主要页面以及部分功能。3个页面分别为“首页”、“详情页”和“评论页”。index: 首页，展示热闻轮播和热闻列表。点击某条热闻时跳转到详情页面。detail: 详情页，"><meta name="keywords" content="前端"><meta property="og:type" content="article"><meta property="og:title" content="微信小程序入坑: 写一个简化版知乎日报"><meta property="og:url" content="https://hongchh.github.io/2018/微信小程序入坑-写一个简化版知乎日报/index.html"><meta property="og:site_name" content="洪创煌的博客"><meta property="og:description" content="最近开始入坑微信小程序，发现想要练手也不容易，找免费的基于HTTPS的API就要花点时间。在看了网上一些介绍后，决定采用知乎日报的API，写一个简单版的知乎日报作为入坑练习。本文尝试使用微信小程序写一个小demo，实现知乎日报的3个主要页面以及部分功能。3个页面分别为“首页”、“详情页”和“评论页”。index: 首页，展示热闻轮播和热闻列表。点击某条热闻时跳转到详情页面。detail: 详情页，"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://hongchh.github.io/images/2018-07-06/pages.png"><meta property="og:updated_time" content="2018-07-08T08:54:34.694Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="微信小程序入坑: 写一个简化版知乎日报"><meta name="twitter:description" content="最近开始入坑微信小程序，发现想要练手也不容易，找免费的基于HTTPS的API就要花点时间。在看了网上一些介绍后，决定采用知乎日报的API，写一个简单版的知乎日报作为入坑练习。本文尝试使用微信小程序写一个小demo，实现知乎日报的3个主要页面以及部分功能。3个页面分别为“首页”、“详情页”和“评论页”。index: 首页，展示热闻轮播和热闻列表。点击某条热闻时跳转到详情页面。detail: 详情页，"><meta name="twitter:image" content="https://hongchh.github.io/images/2018-07-06/pages.png"><link rel="icon" href="/css/images/favicon.png"><link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/libs/titillium-web/styles.css"><link rel="stylesheet" href="/libs/source-code-pro/styles.css"><link rel="stylesheet" href="/css/style.css"><script src="/libs/jquery/2.0.3/jquery.min.js"></script><link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css"><link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css"><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script></head></html><body><div id="wrap"><header id="header"><div id="header-outer" class="outer"><div class="container"><div class="container-inner"><div id="header-title"><h1 class="logo-wrap"><a href="/" class="logo"></a></h1><h2 class="subtitle-wrap"><p class="subtitle">生命是一场练习！</p></h2></div><div id="header-inner" class="nav-container"><a id="main-nav-toggle" class="nav-icon fa fa-bars"></a><div class="nav-container-inner"><ul id="main-nav"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/">主页</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/about/index.html">关于</a></li></ul><nav id="sub-nav"><div id="search-form-wrap"><form class="search-form"><input type="text" class="ins-search-input search-form-input" placeholder="搜索"> <button type="submit" class="search-form-submit"></button></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="想要查找什么..."> <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"文章",PAGES:"页面",CATEGORIES:"分类",TAGS:"标签",UNTITLED:"(未命名)"},ROOT_URL:"/",CONTENT_URL:"/content.json"}</script><script src="/js/insight.js"></script></div></nav></div></div></div></div></div></header><div class="container"><div class="main-body container-inner"><div class="main-body-inner"><section id="main"><div class="main-body-header"><h1 class="header">未分类</h1></div><div class="main-body-content"><article id="post-微信小程序入坑-写一个简化版知乎日报" class="article article-single article-type-post" itemscope itemprop="blogPost"><div class="article-inner"><header class="article-header"><h1 class="article-title" itemprop="name">微信小程序入坑: 写一个简化版知乎日报</h1></header><div class="article-meta"><div class="article-date"><a href="/2018/微信小程序入坑-写一个简化版知乎日报/" class="article-date"><time datetime="2018-07-06T02:25:52.000Z" itemprop="datePublished">2018-07-06</time></a></div><div class="article-tag"><i class="fa fa-tag"></i> <a class="tag-link" href="/tags/前端/">前端</a></div></div><div class="article-entry" itemprop="articleBody"><p>最近开始入坑微信小程序，发现想要练手也不容易，找免费的基于HTTPS的API就要花点时间。在看了网上一些介绍后，决定采用<a href="https://github.com/izzyleung/ZhihuDailyPurify/wiki/%E7%9F%A5%E4%B9%8E%E6%97%A5%E6%8A%A5-API-%E5%88%86%E6%9E%90" target="_blank" rel="external">知乎日报的API</a>，写一个简单版的知乎日报作为入坑练习。本文尝试使用微信小程序写一个小demo，实现知乎日报的3个主要页面以及部分功能。3个页面分别为“首页”、“详情页”和“评论页”。</p><p><img src="/images/2018-07-06/pages.png" alt="页面关系"></p><ul><li>index: 首页，展示热闻轮播和热闻列表。点击某条热闻时跳转到详情页面。</li><li>detail: 详情页，展示某条热闻的内容，可从该页面跳转至相应的评论页面。</li><li>discussion: 评论页，展示某条热闻对应的长评和短评。</li></ul><p>备注：项目地址为<a href="https://github.com/hongchh/simplified-zhihu-daily/tree/master/wxmp" target="_blank" rel="external">https://github.com/hongchh/simplified-zhihu-daily/tree/master/wxmp</a></p><h1 id="一、项目结构和成果展示"><a href="#一、项目结构和成果展示" class="headerlink" title="一、项目结构和成果展示"></a>一、项目结构和成果展示</h1><p>入坑练习比较简单，暂时按照微信小程序开发者工具所创建的模板项目结构来。项目的文件结构和相关描述如下。<br></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">├─pages: 各个页面的代码</span><br><span class="line">│    ├─detail: 详情页面</span><br><span class="line">│    │    ├─detail.js: 详情页面逻辑层代码</span><br><span class="line">│    │    ├─detail.wxml: 详情页面结构</span><br><span class="line">│    │    └─detail.wxss: 详情页面样式表</span><br><span class="line">│    ├─discussion: 评论页面</span><br><span class="line">│    │    ├─discussion.js: 评论页面逻辑层代码</span><br><span class="line">│    │    ├─discussion.wxml: 评论页面结构</span><br><span class="line">│    │    └─discussion.wxss: 评论页面样式表</span><br><span class="line">│    └─index: 首页</span><br><span class="line">│         ├─index.js: 首页逻辑层代码</span><br><span class="line">│         ├─index.wxml: 首页页面结构</span><br><span class="line">│         └─index.wxss: 首页样式表</span><br><span class="line">├─utils: 工具函数</span><br><span class="line">│    └─util.js: 工具函数</span><br><span class="line">├─app.js: 应用逻辑</span><br><span class="line">├─app.json: 应用公共配置</span><br><span class="line">└─app.wxss: 应用公共样式</span><br></pre></td></tr></table></figure><p></p><p>为了方便大家对这个入坑练习demo有个初步的了解，这里先放出最终的成果截图展示。</p><p><img src="/images/2018-07-06/demo.png" alt="成果页面展示"></p><h1 id="二、开发首页"><a href="#二、开发首页" class="headerlink" title="二、开发首页"></a>二、开发首页</h1><p>首页分为两个部分，顶部有一个轮播，接着是一个热闻列表。轮播可以使用小程序提供的<code>&lt;swiper&gt;</code>组件来实现，比较简单。点击轮播项的时候需要跳转到相应的热闻详情页面，此处给最外层的<code>&lt;swiper&gt;</code>容器添加一个事件处理器，通过事件委托处理子元素的点击事件。子元素通过<code>data-id</code>来标记，当点击事件冒泡到外层父元素上时便可知道用户点击的是哪一条热闻。<br></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">swiper</span> <span class="attr">indicator-dots</span> <span class="attr">autoplay</span> <span class="attr">bindtap</span>=<span class="string">"goToStoryDetail"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">swiper-item</span> <span class="attr">wx:for</span>=<span class="string">"&#123;&#123; topStories &#125;&#125;"</span> <span class="attr">wx:key</span>=<span class="string">"&#123;&#123; item.id &#125;&#125;"</span> <span class="attr">data-id</span>=<span class="string">"&#123;&#123; item.id &#125;&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"top-stories-item"</span> <span class="attr">style</span>=<span class="string">"background-image: url(&#123;&#123; item.image &#125;&#125;)"</span> <span class="attr">data-id</span>=<span class="string">"&#123;&#123; item.id &#125;&#125;"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"top-stories-item-text"</span> <span class="attr">data-id</span>=<span class="string">"&#123;&#123; item.id &#125;&#125;"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">text</span> <span class="attr">data-id</span>=<span class="string">"&#123;&#123; item.id &#125;&#125;"</span>&gt;</span>&#123;&#123; item.title &#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">swiper-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">swiper</span>&gt;</span></span><br></pre></td></tr></table></figure><p></p><p>热闻列表是一个分组的列表，显示热闻的时候按天显示。每组热闻的前面都会显示所属的时间，例如下图中的“今日热闻”、“7月5日 星期四”。因此这里的列表渲染是一个两重循环。逻辑层先将数据格式化好，视图层利用两层<code>wx:for</code>即可完成列表的渲染。最后，点击任一条热闻都需要跳转到相应的详情页，这里的处理方式与轮播那里一样，使用事件委托在最外层父元素上挂一个事件处理器即可。</p><p><img src="/images/2018-07-06/story-list.png" alt="热闻列表"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">id</span>=<span class="string">"stories-list"</span> <span class="attr">bindtap</span>=<span class="string">"goToStoryDetail"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">block</span> <span class="attr">wx:for</span>=<span class="string">"&#123;&#123; storiesByDay &#125;&#125;"</span> <span class="attr">wx:key</span>=<span class="string">"&#123;&#123; index &#125;&#125;"</span> <span class="attr">wx:for-item</span>=<span class="string">"stories"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">id</span>=<span class="string">"stories-time"</span>&gt;</span>&#123;&#123; stories.date &#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"stories-list-item"</span> <span class="attr">wx:for</span>=<span class="string">"&#123;&#123; stories.stories &#125;&#125;"</span> <span class="attr">wx:key</span>=<span class="string">"&#123;&#123; item.id &#125;&#125;"</span> <span class="attr">data-id</span>=<span class="string">"&#123;&#123; item.id &#125;&#125;"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">text</span> <span class="attr">data-id</span>=<span class="string">"&#123;&#123; item.id &#125;&#125;"</span>&gt;</span>&#123;&#123; item.title &#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">image</span> <span class="attr">src</span>=<span class="string">"&#123;&#123; item.images[0] &#125;&#125;"</span> <span class="attr">data-id</span>=<span class="string">"&#123;&#123; item.id &#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">image</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">block</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><p>逻辑层中使用<code>wx.request</code>来获取数据，进入页面会触发<code>onShow</code>钩子，在<code>onShow</code>钩子中调用加载最近热闻的方法把首屏数据加载即可。<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    topStories: [],</span><br><span class="line">    storiesByDay: [],</span><br><span class="line">    beforeDay: <span class="string">''</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 进入页面加载今日热闻</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  onShow () &#123;</span><br><span class="line">    <span class="keyword">this</span>.getStories()</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 获取首页数据</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  getStories () &#123;</span><br><span class="line">    wx.request(&#123;</span><br><span class="line">      url: <span class="string">'https://news-at.zhihu.com/api/4/news/latest'</span>,</span><br><span class="line">      success: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">          topStories: res.data.top_stories,</span><br><span class="line">          storiesByDay: [&#123;</span><br><span class="line">            stories: res.data.stories,</span><br><span class="line">            date: <span class="string">'今日热闻'</span></span><br><span class="line">          &#125;],</span><br><span class="line">          beforeDay: res.data.date</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p></p><p>首屏数据只包含了今天的热闻，过往的热闻需要在页面上拉触底的时候进行加载。小程序页面上拉触底的时候会触发<code>onReachBottom</code>钩子，在<code>onReachBottom</code>钩子中调用加载过往热闻的接口即可，加载完成后通过<code>setData</code>把数据变化反映到视图层。过往热闻的时间按照“XX月XX日 星期X”的格式进行展示，在处理响应数据的时候通过工具函数对日期进行格式化即可。<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> utils = <span class="built_in">require</span>(<span class="string">'../../utils/util.js'</span>)</span><br><span class="line"></span><br><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    topStories: [],</span><br><span class="line">    storiesByDay: [],</span><br><span class="line">    beforeDay: <span class="string">''</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 上拉触底，加载更多热闻</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  onReachBottom () &#123;</span><br><span class="line">    <span class="keyword">this</span>.getMoreStories()</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 加载过往热闻</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  getMoreStories () &#123;</span><br><span class="line">    wx.request(&#123;</span><br><span class="line">      url: <span class="string">'https://news-at.zhihu.com/api/4/news/before/'</span> + <span class="keyword">this</span>.data.beforeDay,</span><br><span class="line">      success: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.data.storiesByDay.push(&#123;</span><br><span class="line">          stories: res.data.stories,</span><br><span class="line">          date: utils.formatDate(res.data.date)</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">          storiesByDay: <span class="keyword">this</span>.data.storiesByDay,</span><br><span class="line">          beforeDay: res.data.date</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p></p><p>最后，点击首页热闻跳转至详情页，可以通过<code>wx.navigateTo</code>来实现。跳转的时候通过<code>url</code>将热闻的id传递给详情页的逻辑层。<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 点击某条热闻，跳转到热闻详情</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  goToStoryDetail (e) &#123;</span><br><span class="line">    wx.navigateTo(&#123;</span><br><span class="line">      url: <span class="string">'/pages/detail/detail?id='</span> + e.target.dataset.id</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p></p><p>页面样式参考了知乎日报APP中的样式，部分数值以及交互方式可能不一致，由于没有设计稿，样式都是根据感觉大致调一下。微信小程序的样式表跟传统的CSS几乎一样，除了部分需要说明的地方之外，本文对样式部分将不进行过多阐述。</p><h1 id="三、开发详情页"><a href="#三、开发详情页" class="headerlink" title="三、开发详情页"></a>三、开发详情页</h1><p>详情页的内容是HTML富文本，调用详情接口会返回一段HTML和一个CSS样式表链接。由于微信小程序不能直接渲染HTML，因此这里还需要做一次富文本解析，将HTML转化为WXML。（下图中的<code>body</code>字段即为热闻的详细内容）</p><p><img src="/images/2018-07-06/detail-data.png" alt="详情接口返回的数据"></p><p>这里我选择了<a href="https://github.com/icindy/wxParse" target="_blank" rel="external">wxParse</a>来进行富文本解析，用法参照github上的描述，比较简单。请求接口获取数据后将HTML解析成WXML，渲染到页面上显示出来。<br></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">id</span>=<span class="string">"story-content"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">is</span>=<span class="string">"wxParse"</span> <span class="attr">data</span>=<span class="string">"&#123;&#123; wxParseData:story.nodes &#125;&#125;"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><p></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wx.request(&#123;</span><br><span class="line">  url: <span class="string">'https://news-at.zhihu.com/api/4/news/'</span> + <span class="keyword">this</span>.data.storyId,</span><br><span class="line">  success: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    WxParse.wxParse(<span class="string">'story'</span>, <span class="string">'html'</span>, res.data.body, <span class="keyword">this</span>, <span class="number">5</span>)</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>接口返回的CSS样式表链接中包含有HTML标签名，在小程序这边不适用，因此接口返回的样式表可以直接舍弃。自己根据需要调整样式。<code>wxParse</code>本身有自己的样式表，显示出来也还可以。我这里对几个地方补充点样式作调整。通过开发者工具的<code>Wxml</code>面板查看解析后的标签类名，在<code>wxss</code>中对相应的类添加样式。</p><p><img src="/images/2018-07-06/wxml-panel.png" alt="Wxml面板"></p><p>例如作者信息，下面是调整样式前后的对比图。</p><p><img src="/images/2018-07-06/fix-style.png" alt="富文本样式调整"></p><p>在这个demo中，详情页还实现了分享和跳转功能。由于小程序顶部的状态栏空间不太够，这里没有像<code>知乎日报APP</code>一样把操作按钮放在顶栏，而是固定在屏幕右下角。另外，由于没有引入图标库，微信小程序提供的icon又太少，这里暂时用字符图标代替。实现页面分享只需要设置按钮的<code>open-type</code>字段为<code>share</code>，然后在逻辑层的<code>onShareAppMessage</code>钩子中设置相关参数即可。<br></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">id</span>=<span class="string">"action"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">plain</span> <span class="attr">id</span>=<span class="string">"share"</span> <span class="attr">open-type</span>=<span class="string">"share"</span>&gt;</span>☍<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">plain</span> <span class="attr">id</span>=<span class="string">"discuss"</span> <span class="attr">bindtap</span>=<span class="string">"goToDiscussion"</span>&gt;</span>☷<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><p></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  onShareAppMessage () &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      title: <span class="keyword">this</span>.data.title,</span><br><span class="line">      imageUrl: <span class="keyword">this</span>.data.image,</span><br><span class="line">      path: <span class="string">'/pages/detail/detail?id='</span> + <span class="keyword">this</span>.data.storyId</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>跳转至评论页的实现与之前的从首页跳转到详情页的操作相同，使用<code>wx.navigateTo</code>实现页面跳转，通过url的查询字符串传递参数。<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  goToDiscussion () &#123;</span><br><span class="line">    wx.navigateTo(&#123;</span><br><span class="line">      url: <span class="string">'/pages/discussion/discussion?id='</span> + <span class="keyword">this</span>.data.storyId</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p></p><h1 id="四、开发评论页"><a href="#四、开发评论页" class="headerlink" title="四、开发评论页"></a>四、开发评论页</h1><p>评论页比较简单，没有多余的操作，只需要在页面展示的时候调用接口获取长评以及短评数据即可。长评和短评的展示格式一样，下面是长评列表的WXML结构，使用<code>wx:for</code>进行列表渲染。跟详情页一样，由于没有合适的icon，这里点赞的icon使用字符<code>❤</code>代替。<br></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">text</span> <span class="attr">id</span>=<span class="string">"long-comments-bar"</span>&gt;</span>&#123;&#123; longComments.length &#125;&#125;条长评<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"comments"</span> <span class="attr">wx:for</span>=<span class="string">"&#123;&#123; longComments &#125;&#125;"</span> <span class="attr">wx:key</span>=<span class="string">"&#123;&#123; index &#125;&#125;"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">view</span> <span class="attr">class</span>=<span class="string">"info"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">image</span> <span class="attr">class</span>=<span class="string">"avatar"</span> <span class="attr">src</span>=<span class="string">"&#123;&#123; item.avatar &#125;&#125;"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"author"</span>&gt;</span>&#123;&#123; item.author &#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"likes"</span>&gt;</span>❤ &#123;&#123; item.likes &#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span>&#123;&#123; item.content &#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">text</span> <span class="attr">class</span>=<span class="string">"time"</span>&gt;</span>&#123;&#123; item.time &#125;&#125;<span class="tag">&lt;/<span class="name">text</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">view</span>&gt;</span></span><br></pre></td></tr></table></figure><p></p><p>数据使用<code>wx.request</code>调用接口获取，长评和短评的接口数据格式都一样，因此写到同一个函数里。获取数据后都需要对数据中每条评论的时间进行格式化，转化为我们想要展示的格式，最后再交给视图层渲染展示。<br></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 加载长评或短评</span></span><br><span class="line"><span class="comment">   * @param &#123; Number &#125; type 评论类型，0-长评，1-短评</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  getComments (type) &#123;</span><br><span class="line">    <span class="keyword">const</span> postfix = [<span class="string">'/long-comments'</span>, <span class="string">'/short-comments'</span>]</span><br><span class="line">    wx.request(&#123;</span><br><span class="line">      url: <span class="string">'https://news-at.zhihu.com/api/4/story/'</span> + <span class="keyword">this</span>.data.storyId + postfix[type],</span><br><span class="line">      success: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 格式化评论发表时间</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; res.data.comments.length; ++i) &#123;</span><br><span class="line">          res.data.comments[i].time = utils.formatTime(res.data.comments[i].time)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 设置数据</span></span><br><span class="line">        <span class="keyword">if</span> (type === <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="keyword">this</span>.setData(&#123; <span class="attr">longComments</span>: res.data.comments &#125;)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">this</span>.setData(&#123; <span class="attr">shortComments</span>: res.data.comments &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p></p><h1 id="五、总结"><a href="#五、总结" class="headerlink" title="五、总结"></a>五、总结</h1><p>至此，简化版知乎日报的3个页面已经开发完成。由于demo比较简单，写起来比较快没什么难度，算是一次简易的入坑练习。虽然简单，但写的过程中也有发现点“不便之处”。无法在js中直接动态修改样式，尤其是内联样式。切换样式只能通过现在wxss中写好，然后通过数据绑定切换类名或id来实现。在详情页中，使用<code>wxParse</code>解析富文本后，它会给作者头像这个<code>image</code>元素添加一个内联样式，设置了图像高度，这个高度应该是<code>wxParse</code>根据某种规则计算出来的。在从详情页跳转到评论页再返回的时候，这里的计算会出现问题，导致高度变得很大，如下图所示。</p><p><img src="/images/2018-07-06/inline-style.png" alt="内联样式问题"></p><p>这里如果在wxss中相关的类名里面指明图像的<code>width/height</code>，会由于优先级低于内联样式而失效，无法解决这个问题。如果能在js中修改内联样式，便可以消除这个影响，可惜查了文档后发现并没有这种操作。最后是采取了下面这种做法，设置最大宽高度<code>max-width/max-height</code>，避开了与内联样式的冲突，又限制了图像的宽高，消除了这个影响。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.answer</span> <span class="selector-class">.meta</span> <span class="selector-class">.avatar</span> &#123;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">34px</span>;</span><br><span class="line">  <span class="attribute">max-height</span>: <span class="number">34px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>刚入坑，了解不多，后续再继续踩坑继续了解~</p></div><footer class="article-footer"><a data-url="https://hongchh.github.io/2018/微信小程序入坑-写一个简化版知乎日报/" data-id="cjjcl3cix0028tktinpmq0ugg" class="article-share-link"><i class="fa fa-share"></i>分享到</a><script>!function(n){n("body").on("click",function(){n(".article-share-box.on").removeClass("on")}).on("click",".article-share-link",function(t){t.stopPropagation();var e,a=n(this),o=a.attr("data-url"),r=encodeURIComponent(o),i="article-share-box-"+a.attr("data-id"),s=a.offset();if(n("#"+i).length){if((e=n("#"+i)).hasClass("on"))return void e.removeClass("on")}else{var l=['<div id="'+i+'" class="article-share-box">','<input class="article-share-input" value="'+o+'">','<div class="article-share-links">','<a href="https://twitter.com/intent/tweet?url='+r+'" class="article-share-twitter" target="_blank" title="Twitter"></a>','<a href="https://www.facebook.com/sharer.php?u='+r+'" class="article-share-facebook" target="_blank" title="Facebook"></a>','<a href="http://pinterest.com/pin/create/button/?url='+r+'" class="article-share-pinterest" target="_blank" title="Pinterest"></a>','<a href="https://plus.google.com/share?url='+r+'" class="article-share-google" target="_blank" title="Google+"></a>',"</div>","</div>"].join("");e=n(l),n("body").append(e)}n(".article-share-box.on").hide(),e.css({top:s.top+25,left:s.left}).addClass("on")}).on("click",".article-share-box",function(t){t.stopPropagation()}).on("click",".article-share-box-input",function(){n(this).select()}).on("click",".article-share-box-link",function(t){t.preventDefault(),t.stopPropagation(),window.open(this.href,"article-share-box-window-"+Date.now(),"width=500,height=450")})}(jQuery)</script></footer></div></article><section id="comments"></section></div></section><aside id="sidebar"><a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a><div class="sidebar-top"><p>关注我 :</p><ul class="social-links"><li><a class="social-tooltip" title="github" href="https://github.com/hongchh" target="_blank"><i class="icon fa fa-github"></i></a></li></ul></div><nav id="article-nav"><a href="/2018/NodeJS-Cpp-Addons之C-类实例包装与异步操作/" id="article-nav-older" class="article-nav-link-wrap"><strong class="article-nav-caption">上一篇</strong><p class="article-nav-title">NodeJS C++ Addons之C++类实例包装与异步操作</p><i class="icon fa fa-chevron-left" id="icon-chevron-left"></i></a></nav><div class="widgets-container"><div class="widget-wrap"><h3 class="widget-title">最新文章</h3><div class="widget"><ul id="recent-post"><li><div class="item-thumbnail"><a href="/2018/微信小程序入坑-写一个简化版知乎日报/" class="thumbnail"><span style="background-image:url(/images/2018-07-06/pages.png)" alt="微信小程序入坑: 写一个简化版知乎日报" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/2018/微信小程序入坑-写一个简化版知乎日报/" class="title">微信小程序入坑: 写一个简化版知乎日报</a></p><p class="item-date"><time datetime="2018-07-06T02:25:52.000Z" itemprop="datePublished">2018-07-06</time></p></div></li><li><div class="item-thumbnail"><a href="/2018/NodeJS-Cpp-Addons之C-类实例包装与异步操作/" class="thumbnail"><span style="background-image:url(/images/2018-04-19/1.png)" alt="NodeJS C++ Addons之C++类实例包装与异步操作" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/2018/NodeJS-Cpp-Addons之C-类实例包装与异步操作/" class="title">NodeJS C++ Addons之C++类实例包装与异步操作</a></p><p class="item-date"><time datetime="2018-04-19T09:20:27.000Z" itemprop="datePublished">2018-04-19</time></p></div></li><li><div class="item-thumbnail"><a href="/2018/NodeJS-Cpp-Addons基础/" class="thumbnail"><span style="background-image:url(/images/2018-04-16/1.png)" alt="NodeJS C++ Addons基础" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/2018/NodeJS-Cpp-Addons基础/" class="title">NodeJS C++ Addons基础</a></p><p class="item-date"><time datetime="2018-04-16T07:45:57.000Z" itemprop="datePublished">2018-04-16</time></p></div></li><li><div class="item-thumbnail"><a href="/2018/试玩NodeJS多进程/" class="thumbnail"><span style="background-image:url(/images/2018-04-11/master-worker.png)" alt="试玩NodeJS多进程" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/2018/试玩NodeJS多进程/" class="title">试玩NodeJS多进程</a></p><p class="item-date"><time datetime="2018-04-11T07:47:22.000Z" itemprop="datePublished">2018-04-11</time></p></div></li><li><div class="item-thumbnail"><a href="/2017/MonkeyEye电影售票系统-性能优化总结/" class="thumbnail"><span style="background-image:url(/images/2017-06-09-23.jpg)" alt="MonkeyEye电影售票系统-性能优化总结" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/2017/MonkeyEye电影售票系统-性能优化总结/" class="title">MonkeyEye电影售票系统-性能优化总结</a></p><p class="item-date"><time datetime="2017-06-09T07:43:09.000Z" itemprop="datePublished">2017-06-09</time></p></div></li></ul></div></div><div class="widget-wrap widget-list"><h3 class="widget-title">归档</h3><div class="widget"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">七月 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">四月 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">四月 2016</a><span class="archive-list-count">1</span></li></ul></div></div><div class="widget-wrap widget-list"><h3 class="widget-title">标签</h3><div class="widget"><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/JavaScript/">JavaScript</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NodeJS/">NodeJS</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Web/">Web</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/其他/">其他</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端/">前端</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库/">数据库</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据结构与算法/">数据结构与算法</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/计算机网络/">计算机网络</a><span class="tag-list-count">3</span></li></ul></div></div><div class="widget-wrap widget-float"><h3 class="widget-title">标签云</h3><div class="widget tagcloud"><a href="/tags/JavaScript/" style="font-size:20px">JavaScript</a> <a href="/tags/NodeJS/" style="font-size:16px">NodeJS</a> <a href="/tags/Web/" style="font-size:18px">Web</a> <a href="/tags/其他/" style="font-size:12px">其他</a> <a href="/tags/前端/" style="font-size:10px">前端</a> <a href="/tags/数据库/" style="font-size:10px">数据库</a> <a href="/tags/数据结构与算法/" style="font-size:18px">数据结构与算法</a> <a href="/tags/计算机网络/" style="font-size:14px">计算机网络</a></div></div><div class="widget-wrap widget-list"><h3 class="widget-title">链接</h3><div class="widget"><ul><li><a href="http://blog.csdn.net/hongchh">CSDN</a></li></ul></div></div></div></aside></div></div></div><footer id="footer"><div class="container"><div class="container-inner"><a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a><div class="credit"><h1 class="logo-wrap"><a href="/" class="logo"></a></h1><p>&copy; 2018 洪创煌(hongchh_sysu@qq.com)</p><p>Powered by <a href="//hexo.io/" target="_blank">Hexo</a>. Theme by <a href="//github.com/ppoffice" target="_blank">PPOffice</a></p></div></div></div></footer><script src="/libs/lightgallery/js/lightgallery.min.js"></script><script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script><script src="/libs/lightgallery/js/lg-pager.min.js"></script><script src="/libs/lightgallery/js/lg-autoplay.min.js"></script><script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script><script src="/libs/lightgallery/js/lg-zoom.min.js"></script><script src="/libs/lightgallery/js/lg-hash.min.js"></script><script src="/libs/lightgallery/js/lg-share.min.js"></script><script src="/libs/lightgallery/js/lg-video.min.js"></script><script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="/js/main.js"></script></div></body>